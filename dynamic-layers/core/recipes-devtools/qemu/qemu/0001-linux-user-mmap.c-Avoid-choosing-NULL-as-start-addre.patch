From 2d45543c4f9992abd16239cc70c6ab09c86e4a1a Mon Sep 17 00:00:00 2001
From: Heinz Wrobel <Heinz.Wrobel@nxp.com>
Date: Wed, 2 Jan 2019 13:59:06 +0100
Subject: [PATCH 1/6] linux-user/mmap.c: Avoid choosing NULL as start address

Verbatim backport of:
https://github.com/qemu/qemu/commit/95e6d4305affbbf5258c6a533be9bfd24599da90#diff-2bf4728e0473404c39c97190bd02b2f8

Signed-off-by: Heinz Wrobel <Heinz.Wrobel@nxp.com>
---
 linux-user/mmap.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/linux-user/mmap.c b/linux-user/mmap.c
index 4888f53..0fbfd6d 100644
--- a/linux-user/mmap.c
+++ b/linux-user/mmap.c
@@ -234,7 +234,7 @@ static abi_ulong mmap_find_vma_reserved(abi_ulong start, abi_ulong size)
         if (prot) {
             end_addr = addr;
         }
-        if (addr + size == end_addr) {
+        if (addr && addr + size == end_addr) {
             break;
         }
         addr -= qemu_host_page_size;
-- 
1.8.3.1

