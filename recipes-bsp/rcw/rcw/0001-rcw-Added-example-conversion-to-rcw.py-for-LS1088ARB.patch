From 7ac778db2fa788186cd814cd76e2620f50ff3bc4 Mon Sep 17 00:00:00 2001
From: nxa15299 <Heinz.Wrobel@nxp.com>
Date: Wed, 17 Jan 2018 09:47:25 +0100
Subject: [PATCH] rcw: Added example conversion to rcw.py for LS1088ARBD

Signed-off-by: nxa15299 <Heinz.Wrobel@nxp.com>
---
 .../PBL_QSPI_1600_700_2100_0x1d_0x0d.rcw           |  41 ++++++++
 .../PBL_SD_1600_700_2100_0x1d_0x0d.rcw             |  44 +++++++++
 .../PBL_eMMC_1600_700_2100_0x1d_0x0d.rcw           |  44 +++++++++
 .../PBL_QSPI_1600_700_2100_0x1d_0x14.rcw           |  43 ++++++++
 ls1088ardb/Makefile                                |   1 +
 .../PBL_IFC_800_500_1600_golden.rcw                |  26 +++++
 .../PBL_QSPI_800_500_1600_golden.rcw               |  26 +++++
 ls1088ardb/a008822.rcw                             |  13 +++
 ls1088ardb/a008851.rcw                             |  24 +++++
 ls1088ardb/a009102_single.rcw                      |   9 ++
 ls1088ardb/a010554_single.rcw                      |   9 ++
 ls1088ardb/bootlocptr_nor.rcw                      |   8 ++
 ls1088ardb/bootlocptr_qspi.rcw                     |   8 ++
 ls1088ardb/bootlocptr_sdhc.rcw                     |   8 ++
 ls1088ardb/ls1088rdb.rcwi                          | 109 +++++++++++++++++++++
 ls1088ardb/tcpz_nosecure_region.rcw                |   8 ++
 16 files changed, 421 insertions(+)
 create mode 100644 ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_QSPI_1600_700_2100_0x1d_0x0d.rcw
 create mode 100644 ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_SD_1600_700_2100_0x1d_0x0d.rcw
 create mode 100644 ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_eMMC_1600_700_2100_0x1d_0x0d.rcw
 create mode 100644 ls1088ardb/FCSSRR_PPP_0x1d_0x14/PBL_QSPI_1600_700_2100_0x1d_0x14.rcw
 create mode 100644 ls1088ardb/Makefile
 create mode 100644 ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_IFC_800_500_1600_golden.rcw
 create mode 100644 ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_QSPI_800_500_1600_golden.rcw
 create mode 100644 ls1088ardb/a008822.rcw
 create mode 100644 ls1088ardb/a008851.rcw
 create mode 100644 ls1088ardb/a009102_single.rcw
 create mode 100644 ls1088ardb/a010554_single.rcw
 create mode 100644 ls1088ardb/bootlocptr_nor.rcw
 create mode 100644 ls1088ardb/bootlocptr_qspi.rcw
 create mode 100644 ls1088ardb/bootlocptr_sdhc.rcw
 create mode 100755 ls1088ardb/ls1088rdb.rcwi
 create mode 100644 ls1088ardb/tcpz_nosecure_region.rcw

diff --git a/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_QSPI_1600_700_2100_0x1d_0x0d.rcw b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_QSPI_1600_700_2100_0x1d_0x0d.rcw
new file mode 100644
index 0000000..648156e
--- /dev/null
+++ b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_QSPI_1600_700_2100_0x1d_0x0d.rcw
@@ -0,0 +1,41 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=7
+MEM_PLL_RAT=21
+CGA_PLL1_RAT=16
+CGA_PLL2_RAT=16
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=1
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=26
+FLASH_MODE=0x2
+PBI_LENGTH=0xa
+SYSCLK_FREQ=0x258
+IIC3_EXT=1
+UART_BASE=3
+IIC2_BASE=2
+IIC3_BASE=1
+IIC4_BASE=1
+IFC_GRP_A_BASE=3
+IFC_GRP_FGHI_BASE=1
+QSPI_OCT_EN=1
+EC1=1
+EC2=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PRTCL_S1_LN0=1
+SRDS_PRTCL_S1_LN1=1
+SRDS_PRTCL_S1_LN2=4
+SRDS_PRTCL_S1_LN3=4
+SRDS_PRTCL_S2_LN0=5
+SRDS_PRTCL_S2_LN1=5
+SRDS_PRTCL_S2_LN2=5
+SRDS_PRTCL_S2_LN3=9
+SRDS_DIV_PEX_S1=1
+SRDS_DIV_PEX_S2=1
+
+#include <bootlocptr_qspi.rcw>
+#include <a009102_single.rcw>
+#include <a010554_single.rcw>
+/* CRC and Stop command (CRC 0xe09d8c9a)*/
diff --git a/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_SD_1600_700_2100_0x1d_0x0d.rcw b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_SD_1600_700_2100_0x1d_0x0d.rcw
new file mode 100644
index 0000000..feae6c9
--- /dev/null
+++ b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_SD_1600_700_2100_0x1d_0x0d.rcw
@@ -0,0 +1,44 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=7
+MEM_PLL_RAT=21
+CGA_PLL1_RAT=16
+CGA_PLL2_RAT=16
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=1
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=21
+FLASH_MODE=0x2
+PBI_LENGTH=0x10
+SYSCLK_FREQ=0x258
+IIC3_EXT=1
+UART_BASE=3
+IIC2_BASE=2
+IIC3_BASE=1
+IIC4_BASE=1
+SPI_PCS_BASE=3
+IFC_GRP_A_BASE=3
+IFC_GRP_FGHI_BASE=1
+QSPI_OCT_EN=1
+EC1=1
+EC2=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PRTCL_S1_LN0=1
+SRDS_PRTCL_S1_LN1=1
+SRDS_PRTCL_S1_LN2=4
+SRDS_PRTCL_S1_LN3=4
+SRDS_PRTCL_S2_LN0=5
+SRDS_PRTCL_S2_LN1=5
+SRDS_PRTCL_S2_LN2=5
+SRDS_PRTCL_S2_LN3=9
+
+.pbi
+blockcopy 0x40,0x00100000,0x1800a000,0x00015000
+.end
+#include <bootlocptr_sdhc.rcw>
+#include <a009102_single.rcw>
+#include <a010554_single.rcw>
+#include <tcpz_nosecure_region.rcw>
+/* CRC and Stop command (CRC 0x90c59bb0)*/
diff --git a/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_eMMC_1600_700_2100_0x1d_0x0d.rcw b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_eMMC_1600_700_2100_0x1d_0x0d.rcw
new file mode 100644
index 0000000..e251dd2
--- /dev/null
+++ b/ls1088ardb/FCQQQQQQQQ_PPP_H_0x1d_0x0d/PBL_eMMC_1600_700_2100_0x1d_0x0d.rcw
@@ -0,0 +1,44 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=7
+MEM_PLL_RAT=21
+CGA_PLL1_RAT=16
+CGA_PLL2_RAT=16
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=1
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=21
+FLASH_MODE=0x2
+PBI_LENGTH=0x10
+SYSCLK_FREQ=0x258
+IIC3_EXT=1
+UART_BASE=3
+IIC2_BASE=2
+IIC3_BASE=1
+IIC4_BASE=1
+SPI_PCS_BASE=3
+IFC_GRP_A_BASE=3
+IFC_GRP_FGHI_BASE=1
+QSPI_OCT_EN=1
+EC1=1
+EC2=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PRTCL_S1_LN0=1
+SRDS_PRTCL_S1_LN1=1
+SRDS_PRTCL_S1_LN2=4
+SRDS_PRTCL_S1_LN3=4
+SRDS_PRTCL_S2_LN0=5
+SRDS_PRTCL_S2_LN1=5
+SRDS_PRTCL_S2_LN2=5
+SRDS_PRTCL_S2_LN3=9
+
+.pbi
+blockcopy 0x41,0x00100000,0x1800a000,0x00016000
+.end
+#include <bootlocptr_sdhc.rcw>
+#include <a009102_single.rcw>
+#include <a010554_single.rcw>
+#include <tcpz_nosecure_region.rcw>
+/* CRC and Stop command (CRC 0x3978ee00)*/
diff --git a/ls1088ardb/FCSSRR_PPP_0x1d_0x14/PBL_QSPI_1600_700_2100_0x1d_0x14.rcw b/ls1088ardb/FCSSRR_PPP_0x1d_0x14/PBL_QSPI_1600_700_2100_0x1d_0x14.rcw
new file mode 100644
index 0000000..238f991
--- /dev/null
+++ b/ls1088ardb/FCSSRR_PPP_0x1d_0x14/PBL_QSPI_1600_700_2100_0x1d_0x14.rcw
@@ -0,0 +1,43 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=7
+MEM_PLL_RAT=21
+CGA_PLL1_RAT=16
+CGA_PLL2_RAT=16
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=1
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=26
+FLASH_MODE=0x2
+PBI_LENGTH=0x1c
+SYSCLK_FREQ=0x258
+IIC3_EXT=1
+UART_BASE=3
+IIC2_BASE=2
+IIC3_BASE=1
+IIC4_BASE=1
+IFC_GRP_A_BASE=3
+IFC_GRP_FGHI_BASE=1
+QSPI_OCT_EN=1
+EC1=1
+EC2=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PRTCL_S1_LN0=1
+SRDS_PRTCL_S1_LN1=1
+SRDS_PRTCL_S1_LN2=4
+SRDS_PRTCL_S1_LN3=4
+SRDS_PRTCL_S2_LN0=5
+SRDS_PRTCL_S2_LN1=5
+SRDS_PRTCL_S2_LN2=7
+SRDS_PRTCL_S2_LN3=7
+SRDS_DIV_PEX_S1=1
+
+#include <bootlocptr_qspi.rcw>
+#include <a009102_single.rcw>
+#include <a010554_single.rcw>
+#include <a008851.rcw>
+#include <a008822.rcw>
+/* CRC changed due to different a008851 implementation! */
+/* CRC and Stop command (CRC 0xbc73054a)*/
diff --git a/ls1088ardb/Makefile b/ls1088ardb/Makefile
new file mode 100644
index 0000000..f77e46b
--- /dev/null
+++ b/ls1088ardb/Makefile
@@ -0,0 +1 @@
+include ../Makefile.inc
diff --git a/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_IFC_800_500_1600_golden.rcw b/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_IFC_800_500_1600_golden.rcw
new file mode 100644
index 0000000..aa5d047
--- /dev/null
+++ b/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_IFC_800_500_1600_golden.rcw
@@ -0,0 +1,26 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=5
+MEM_PLL_RAT=16
+CGA_PLL1_RAT=8
+CGA_PLL2_RAT=8
+CGA_PLL1_SPD=1
+CGA_PLL2_SPD=1
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=6
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=24
+FLASH_MODE=0x2
+PBI_LENGTH=0x6
+SYSCLK_FREQ=0x258
+UART_BASE=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PLL_PD_PLL1=1
+SRDS_PLL_PD_PLL2=1
+SRDS_PLL_PD_PLL3=1
+SRDS_PLL_PD_PLL4=1
+
+#include <bootlocptr_nor.rcw>
+/* CRC and Stop command (CRC 0x128124f8)*/
diff --git a/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_QSPI_800_500_1600_golden.rcw b/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_QSPI_800_500_1600_golden.rcw
new file mode 100644
index 0000000..3206cc8
--- /dev/null
+++ b/ls1088ardb/NNNNNNNNNN_N_N_N_N/PBL_QSPI_800_500_1600_golden.rcw
@@ -0,0 +1,26 @@
+#include <ls1088rdb.rcwi>
+
+SYS_PLL_RAT=5
+MEM_PLL_RAT=16
+CGA_PLL1_RAT=8
+CGA_PLL2_RAT=8
+CGA_PLL1_SPD=1
+CGA_PLL2_SPD=1
+HWA_CGA_M1_CLK_SEL=2
+HWA_CGA_M2_CLK_SEL=6
+DDR_REFCLK_SEL=2
+DRAM_LAT=1
+BOOT_LOC=26
+FLASH_MODE=0x2
+PBI_LENGTH=0x6
+SYSCLK_FREQ=0x258
+UART_BASE=2
+USB1_CLK_FSEL=39
+USB2_CLK_FSEL=39
+SRDS_PLL_PD_PLL1=1
+SRDS_PLL_PD_PLL2=1
+SRDS_PLL_PD_PLL3=1
+SRDS_PLL_PD_PLL4=1
+
+#include <bootlocptr_qspi.rcw>
+/* CRC and Stop command (CRC 0x7261b37a)*/
diff --git a/ls1088ardb/a008822.rcw b/ls1088ardb/a008822.rcw
new file mode 100644
index 0000000..cf64910
--- /dev/null
+++ b/ls1088ardb/a008822.rcw
@@ -0,0 +1,13 @@
+
+/*
+ * Errata workaround for A-008822 on LS1088A:
+ *      - Change the default AXI system error response behavior for
+ *        PCI Express outbound non-posted requests
+ *
+ */
+
+.pbi
+write 0x03400890,0x00800401
+write 0x03500890,0x00800401
+write 0x03600890,0x00800401
+.end
diff --git a/ls1088ardb/a008851.rcw b/ls1088ardb/a008851.rcw
new file mode 100644
index 0000000..70dd24a
--- /dev/null
+++ b/ls1088ardb/a008851.rcw
@@ -0,0 +1,24 @@
+
+/*
+ * Errata workaround for A-008851 on LS1088A:
+ *      - PCIe Gen 3 training settings are not ok for RC
+ *
+ */
+
+.pbi
+write 0x034008bc,0x00000001
+write 0x03400164,0x47474747
+write 0x03400168,0x47474747
+
+write 0x035008bc,0x00000001
+write 0x03500154,0x47474747
+write 0x03500158,0x47474747
+
+write 0x036008bc,0x00000001
+write 0x03600154,0x47474747
+write 0x03600158,0x47474747
+
+write 0x034008bc,0x00000000
+write 0x035008bc,0x00000000
+write 0x036008bc,0x00000000
+.end
diff --git a/ls1088ardb/a009102_single.rcw b/ls1088ardb/a009102_single.rcw
new file mode 100644
index 0000000..294b06d
--- /dev/null
+++ b/ls1088ardb/a009102_single.rcw
@@ -0,0 +1,9 @@
+
+/*
+ * Errata workaround for A-009102 on LS1088A:
+ *      - SATA 6G settings are not correct
+ */
+
+.pbi
+write 0x01eb08dc,0x00502880
+.end
diff --git a/ls1088ardb/a010554_single.rcw b/ls1088ardb/a010554_single.rcw
new file mode 100644
index 0000000..cc5e5c0
--- /dev/null
+++ b/ls1088ardb/a010554_single.rcw
@@ -0,0 +1,9 @@
+
+/*
+ * Errata workaround for A-010554 on LS1088A:
+ *      - SATA recognition may not work
+ */
+
+.pbi
+write 0x1eb1300,0x80104e20
+.end
diff --git a/ls1088ardb/bootlocptr_nor.rcw b/ls1088ardb/bootlocptr_nor.rcw
new file mode 100644
index 0000000..b91c5ac
--- /dev/null
+++ b/ls1088ardb/bootlocptr_nor.rcw
@@ -0,0 +1,8 @@
+/*
+ * Set the boot location pointer to the IFC NOR flash boot area.
+ */
+ 
+.pbi
+write 0x01e00404,0x00000000
+write 0x01e00400,0x30100000
+.end
diff --git a/ls1088ardb/bootlocptr_qspi.rcw b/ls1088ardb/bootlocptr_qspi.rcw
new file mode 100644
index 0000000..f348054
--- /dev/null
+++ b/ls1088ardb/bootlocptr_qspi.rcw
@@ -0,0 +1,8 @@
+/*
+ * Set the boot location pointer to the QSPI flash boot area.
+ */
+ 
+.pbi
+write 0x01e00404,0x00000000
+write 0x01e00400,0x20100000
+.end
diff --git a/ls1088ardb/bootlocptr_sdhc.rcw b/ls1088ardb/bootlocptr_sdhc.rcw
new file mode 100644
index 0000000..a12abda
--- /dev/null
+++ b/ls1088ardb/bootlocptr_sdhc.rcw
@@ -0,0 +1,8 @@
+/*
+ * Set the boot location pointer to the SDHC flash boot area.
+ */
+ 
+.pbi
+write 0x01e00404,0x00000000
+write 0x01e00400,0x1800a000
+.end
diff --git a/ls1088ardb/ls1088rdb.rcwi b/ls1088ardb/ls1088rdb.rcwi
new file mode 100755
index 0000000..6401d66
--- /dev/null
+++ b/ls1088ardb/ls1088rdb.rcwi
@@ -0,0 +1,109 @@
+%size=1024
+%pbiformat=2
+%classicbitnumbers=1
+%littleendian=1
+
+SYS_PLL_CFG[1:0]
+SYS_PLL_RAT[6:2]
+MEM_PLL_CFG[9:8]
+MEM_PLL_RAT[15:10]
+CGA_PLL1_CFG[25:24]
+CGA_PLL1_RAT[31:26]
+CGA_PLL2_CFG[33:32]
+CGA_PLL2_RAT[39:34]
+SYS_PLL_SPD[128]
+MEM_PLL_SPD[129]
+CGA_PLL1_SPD[132]
+CGA_PLL2_SPD[133]
+C1_PLL_SEL[147:144]
+C2_PLL_SEL[151:148]
+HWA_CGA_M1_CLK_SEL[178:176]
+HWA_CGA_M2_CLK_SEL[181:179]
+DDR_REFCLK_SEL[212:211]
+DRAM_LAT[214:213]
+DDR_RATE[215]
+BOOT_LOC[264:260]
+BOOT_HO[265]
+SB_EN[266]
+FLASH_MODE[275:267]
+PBI_LENGTH[287:276]
+SDBGEN[288]
+SYSCLK_FREQ[301:292]
+GPIO_LED_NUM[310:304]
+GPIO_LED_EN[311]
+UART_EXT[354:352]
+IIC2_EXT[357:355]
+IIC3_EXT[360:358]
+IIC4_EXT[363:361]
+SPI_EXT[366:364]
+SDHC_EXT[369:367]
+IRQ1_EXT[372:370]
+IRQ2_EXT[375:373]
+IRQ_EXT[378:376]
+UART_BASE[385:384]
+IIC2_BASE[387:386]
+IIC3_BASE[389:388]
+IIC4_BASE[391:390]
+SPI_BASE_BASE[393:392]
+SPI_PCS_BASE[395:394]
+SDHC_BASE[396]
+IRQ03_BASE[397]
+IRQ04_BASE[398]
+IRQ05_BASE[399]
+IRQ06_BASE[400]
+IRQ07_BASE[401]
+IRQ08_BASE[402]
+IRQ09_BASE[403]
+IRQ10_BASE[404]
+IRQ11_BASE[405]
+EVT_9[406]
+RTC[407]
+ASLEEP[408]
+IFC_GRP_A_EXT[418:416]
+IFC_GRP_D_EXT[427:425]
+IFC_GRP_E_EXT[430:428]
+IFC_GRP_F_EXT[433:431]
+IFC_GRP_G_EXT[436:434]
+IFC_GRP_H_EXT[439:437]
+IFC_GRP_I_EXT[442:440]
+IFC_GRP_A_BASE[449:448]
+IFC_GRP_D_BASE[455:454]
+IFC_GRP_E_BASE[457:456]
+IFC_GRP_FGHI_BASE[459:458]
+IFC_A_8_6[460]
+QSPI_OCT_EN[461]
+HOST_AGT_PEX1[485]
+HOST_AGT_PEX2[486]
+HOST_AGT_PEX3[487]
+GP_INFO[799:768]
+EC1[834:832]
+EC2[837:835]
+EM1[838]
+EM2[839]
+USB[857:856]
+USB1_REFCLK_SEL[859:858]
+USB2_REFCLK_SEL[861:860]
+USB1_CLK_FSEL[869:864]
+USB2_CLK_FSEL[875:870]
+SRDS_PLL_PD_PLL1[896]
+SRDS_PLL_PD_PLL2[897]
+SRDS_PLL_PD_PLL3[898]
+SRDS_PLL_PD_PLL4[899]
+SRDS_PRTCL_S1_LN0[915:912]
+SRDS_PRTCL_S1_LN1[919:916]
+SRDS_PRTCL_S1_LN2[923:920]
+SRDS_PRTCL_S1_LN3[927:924]
+SRDS_PRTCL_S2_LN0[931:928]
+SRDS_PRTCL_S2_LN1[935:932]
+SRDS_PRTCL_S2_LN2[939:936]
+SRDS_PRTCL_S2_LN3[943:940]
+SRDS_PLL_REF_CLK_SEL_S1[945:944]
+SRDS_PLL_REF_CLK_SEL_S2[947:946]
+SRDS_DIV_PEX_S1[949:948]
+SRDS_DIV_PEX_S2[951:950]
+SRDS_S1_REFCLK_SRC_SEL[953:952]
+SRDS_S2_REFCLK_SRC_SEL[955:954]
+
+
+
+
diff --git a/ls1088ardb/tcpz_nosecure_region.rcw b/ls1088ardb/tcpz_nosecure_region.rcw
new file mode 100644
index 0000000..29e4808
--- /dev/null
+++ b/ls1088ardb/tcpz_nosecure_region.rcw
@@ -0,0 +1,8 @@
+
+/*
+ * Set TZPC to no secure region
+ */
+
+.pbi
+write 0x02200000,0x00000000
+.end
-- 
2.15.1

