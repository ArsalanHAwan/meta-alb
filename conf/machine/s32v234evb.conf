#@TYPE: Machine
#@NAME: NXP S32V234EVB
#@SOC: s32v2xx
#@DESCRIPTION: Machine configuration for running the S32V234EVB in 64-bit mode
#@MAINTAINER: Catalin Udma <catalin-dan.udma@nxp.com>
# Copyright 2017-2018 NXP

require conf/machine/include/s32v2xx.inc

KERNEL_DEVICETREE ?= "freescale/s32v234-evb.dtb"
KERNEL_DEFCONFIG ?= "${S}/arch/arm64/configs/s32v234_defconfig"

UBOOT_CONFIG = "qspi sdcard"
UBOOT_CONFIG[sdcard] = "s32v234evb_config,,u-boot.${UBOOT_SUFFIX}"
UBOOT_CONFIG[qspi] = "s32v234evb_flash_config,,u-boot.${UBOOT_SUFFIX}"

INITRAMFS_IMAGE ?= "fsl-image-nfs-initramfs"
BOOT_SPACE = "20480"
BOOT_SCRIPTS += " ${INITRAMFS_IMAGE}-${MACHINE}.cpio.gz.u-boot:/rootfs.uimg "

#Define dependencies for .flashimage
#Offset values are in bytes and are deduced from the values defined in
#u-boot/include/configs/s32.h as {KERNEL|FDT|RAMDISK}_FLASH_ADDR
FLASHIMAGE_UBOOT_SUFFIX = "${UBOOT_SUFFIX}-qspi"
FLASHIMAGE_UBOOT_FILE = "u-boot-${MACHINE}.${FLASHIMAGE_UBOOT_SUFFIX}"
FLASHIMAGE_UBOOT_OFFSET = "0"
FLASHIMAGE_KERNEL_FILE = "${KERNEL_IMAGETYPE}"
FLASHIMAGE_KERNEL_OFFSET = "1048576"
FLASHIMAGE_DTB_SUFFIX = "dtb"
FLASHIMAGE_DTB_FILE = "${KERNEL_IMAGETYPE}-s32v234-evb.${FLASHIMAGE_DTB_SUFFIX}"
FLASHIMAGE_DTB_OFFSET = "11534336"
FLASHIMAGE_ROOTFS_SUFFIX = "cpio.gz.u-boot"
FLASHIMAGE_ROOTFS_OFFSET = "12582912"
FLASHIMAGE_ROOTFS_FILE = "${IMGDEPLOYDIR}/${IMAGE_NAME}.rootfs.${FLASHIMAGE_ROOTFS_SUFFIX}"
FLASHIMAGE = "${IMGDEPLOYDIR}/${IMAGE_NAME}.rootfs.flashimage"