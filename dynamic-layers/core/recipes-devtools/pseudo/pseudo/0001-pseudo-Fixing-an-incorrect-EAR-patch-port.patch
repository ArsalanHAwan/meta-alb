From 63b0c2b11f18f9009ad608636f9494ea23c684fd Mon Sep 17 00:00:00 2001
From: nxa15299 <Heinz.Wrobel@nxp.com>
Date: Thu, 18 Jan 2018 22:12:33 +0100
Subject: [PATCH] pseudo: Fixing an incorrect EAR patch port

---
 pseudo_client.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/pseudo_client.c b/pseudo_client.c
index 1b12914..7550360 100644
--- a/pseudo_client.c
+++ b/pseudo_client.c
@@ -2432,7 +2432,7 @@ pseudo_exec_path(const char **filenamep, int search_path, char * const**argvp) {
 		pseudo_debug(PDBGF_CLIENT, "exec_path: checking %s for %s %s %s\n", path, filename, (forcechroot) ? "(chroot)" : "", (pforcechroot) ? "(pchroot)" : "");
 		if (!*path || (*path == '.' && path_lens[i] == 1)) {
 			/* empty path or . is cwd */
-			if (forcechroot || pforcechroot)
+			if (forcechroot)
 				candidate = pseudo_root_path(__func__, __LINE__, AT_FDCWD, filename, 0);
 			else
 				candidate = pseudo_fix_path(pseudo_cwd, filename, 0, pseudo_cwd_len, NULL, 0, readlink_chroot);
@@ -2454,7 +2454,7 @@ pseudo_exec_path(const char **filenamep, int search_path, char * const**argvp) {
 			/* oh you jerk, making me do extra work */
 			size_t len;
 			char *dir;
-			if (forcechroot) {
+			if (forcechroot || pforcechroot) {
 				dir = pseudo_root_path(__func__, __LINE__, AT_FDCWD, path, 0);
 				if (dir)
 					len = strlen(dir);
-- 
2.15.1

