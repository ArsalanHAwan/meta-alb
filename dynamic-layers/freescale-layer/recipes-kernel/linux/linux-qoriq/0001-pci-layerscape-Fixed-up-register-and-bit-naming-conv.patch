From 9ec41bc396f8423a73241fea7ec48b982624f66f Mon Sep 17 00:00:00 2001
From: nxa15299 <Heinz.Wrobel@nxp.com>
Date: Fri, 12 Jan 2018 10:36:24 +0100
Subject: [PATCH 1/2] pci-layerscape: Fixed up register and bit naming
 convention for DBI writes

Signed-off-by: nxa15299 <Heinz.Wrobel@nxp.com>
---
 drivers/pci/host/pci-layerscape.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/pci/host/pci-layerscape.c b/drivers/pci/host/pci-layerscape.c
index 7ce32ff..3805530 100644
--- a/drivers/pci/host/pci-layerscape.c
+++ b/drivers/pci/host/pci-layerscape.c
@@ -33,7 +33,8 @@
 
 /* PEX Internal Configuration Registers */
 #define PCIE_STRFMR1		0x71c /* Symbol Timer & Filter Mask Register1 */
-#define PCIE_DBI_RO_WR_EN	0x8bc /* DBI Read-Only Write Enable Register */
+#define PCIE_MISC_CONTROL_1_OFF	0x8bc /* DBI Read-Only Write Enable Register */
+#define PCIE_DBI_RO_WR_EN		(0x1 << 0) /* DBI Read-Only Write Enable Bit */
 
 #define PCIE_IATU_NUM		6
 
@@ -158,11 +159,11 @@ static void ls_pcie_host_init(struct pcie_port *pp)
 {
 	struct ls_pcie *pcie = to_ls_pcie(pp);
 
-	iowrite32(1, pcie->pp.dbi_base + PCIE_DBI_RO_WR_EN);
+	iowrite32(PCIE_DBI_RO_WR_EN, pcie->pp.dbi_base + PCIE_MISC_CONTROL_1_OFF);
 	ls_pcie_fix_class(pcie);
 	ls_pcie_clear_multifunction(pcie);
 	ls_pcie_drop_msg_tlp(pcie);
-	iowrite32(0, pcie->pp.dbi_base + PCIE_DBI_RO_WR_EN);
+	iowrite32(0, pcie->pp.dbi_base + PCIE_MISC_CONTROL_1_OFF);
 
 	ls_pcie_disable_outbound_atus(pcie);
 	dw_pcie_setup_rc(pp);
-- 
1.8.3.1

