#@TYPE: Machine
#@NAME: NXP S32G274AEVB
#@SOC: s32g274a
#@DESCRIPTION: Machine configuration for running the S32G274AEVB in 64-bit mode
#@MAINTAINER: Catalin Dan Udma <catalin-dan.udma@nxp.com>
# Copyright 2017-2019 NXP

require conf/machine/include/s32-gen1.inc

UBOOT_DEFCONFIG = "s32g274a_defconfig"

KERNEL_DEVICETREE ?= "freescale/fsl-s32g274a-evb.dtb"
KERNEL_DEFCONFIG ?= "s32g274a_defconfig"

EXTRA_IMAGECMD_ext3 = "-i 4096 -L ${IMAGE_NAME}"
IMAGE_FSTYPES_remove = "jffs2 ubi ext2.gz ext2.gz.u-boot"

BOOT_SPACE = "20480"
UBOOT_BOOTSPACE_OFFSET = "0"
UBOOT_BOOTSPACE_SEEK = "0"

UBOOT_CONFIG ?= "sdcard"
UBOOT_CONFIG[sdcard] = "${UBOOT_DEFCONFIG},,u-boot.${UBOOT_SUFFIX}"

# Define dependencies for .flashimage
# Offset values are in bytes and are deduced from the values defined in
# u-boot/include/configs/s32.h as {KERNEL|FDT|RAMDISK}_FLASH_ADDR
FLASHIMAGE_UBOOT_TYPE = "qspi"
# Normally only FLASHIMAGE_UBOOT_TYPE should be enough, but we also define
# the *_SUFFIX and *_FILE for safety
require conf/machine/include/s32gen1flashmap.inc
FLASHIMAGE_SIZE="64"
FLASHIMAGE_UBOOT_SUFFIX = "${UBOOT_SUFFIX}"
#FLASHIMAGE_UBOOT_FILE = "u-boot-${MACHINE}.${FLASHIMAGE_UBOOT_SUFFIX}-${FLASHIMAGE_UBOOT_TYPE}"
FLASHIMAGE_KERNEL_FILE = "${KERNEL_IMAGETYPE}"
FLASHIMAGE_DTB_SUFFIX = "dtb"
FLASHIMAGE_EXTRA1 = "linux-s32"
FLASHIMAGE_EXTRA1_FILE = "${KERNEL_IMAGETYPE}-fsl-s32g274a-evb.${FLASHIMAGE_DTB_SUFFIX}"
FLASHIMAGE_EXTRA1_OFFSET = "${FLASHIMAGE_DTB_OFFSET}"
FLASHIMAGE_ROOTFS = "fsl-image-base"
FLASHIMAGE_ROOTFS_SUFFIX = "cpio.gz.u-boot"
FLASHIMAGE_ROOTFS_FILE = "${DEPLOY_DIR_IMAGE}/${FLASHIMAGE_ROOTFS}-${MACHINE}.${FLASHIMAGE_ROOTFS_SUFFIX}"
